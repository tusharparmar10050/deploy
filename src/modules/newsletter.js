const con = require('../config/database.js')
require("dotenv").config();
const transporter = require("../helper/sendmail.js")



exports.registerFornewsletter = (email, callback) => {
    con.query("INSERT INTO newsletter (email) VALUES (?)", email, (error, result) => {
        if (error) {
            callback(error, null);
        }
        callback(null, result);

    })
    transporter.sendMail({
        from: '"Tushar Parmar 👻" <zoey43@ethereal.email>',
        to: email,
        subject: "Thank you for subscribing to our Newsletter!",
        text: "We Will Give You Response Soon As Posibble.",
        // html:
        //  `<body marginheight=0 marginwidth=0 topmargin=0 leftmargin=0 style="height: 100% !important; margin: 0; padding: 0; width: 100% !important;min-width: 100%;">      
        // // <table name="bmeMainBody" style="background-color: rgb(52, 73, 94);" width="100%" cellspacing="0" cellpadding="0" border="0" bgcolor="#34495e"><tbody><tr><td width="100%" valign="top" align="center"><table name="bmeMainColumnParentTable" width="100%" cellspacing="0" cellpadding="0" border="0"><tbody><tr><td name="bmeMainColumnParent" style="border: 0px none transparent; border-radius: 0px; border-collapse: separate; border-spacing: 0px;"> <table name="bmeMainColumn" class="" style="max-width: 100%;" width="100%" cellspacing="0" cellpadding="0" border="0" align="center">    <tbody><tr><td class="blk_container bmeHolder" name="bmePreHeader" style="color: rgb(102, 102, 102); border: 0px none transparent;" width="100%" valign="top" bgcolor="" align="center"><div id="dv_2" class="blk_wrapper"><table class="blk" name="blk_permission" style="" width="600" cellspacing="0" cellpadding="0" border="0"><tbody><tr><td name="tblCell" style="padding:20px;" valign="top" align="left"><table width="100%" cellspacing="0" cellpadding="0" border="0"><tbody><tr><td name="bmePermissionText" style="text-align:left;" align="left"><span style="font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-size: 11px;line-height: 140%;"><a style="color: #16a7e0;" target="_new" href="[ViewWebURL]">View this email in your browser</a></span></td></tr></tbody></table></td></tr></tbody></table></div></td></tr> <tr><td class="bmeHolder" name="bmeMainContentParent" style="border: 0px none transparent; border-radius: 0px; border-collapse: separate; border-spacing: 0px; overflow: hidden;" width="100%" valign="top" align="center"> <table name="bmeMainContent" style="border-radius: 0px; border-collapse: separate; border-spacing: 0px; border: 0px none transparent;" width="100%" cellspacing="0" cellpadding="0" border="0" align="center"> <tbody><tr><td class="blk_container bmeHolder" name="bmeHeader" style="color: rgb(56, 56, 56); border: 0px none transparent; background-color: rgb(52, 73, 94);" width="100%" valign="top" bgcolor="#34495e" align="center"><div id="dv_1" class="blk_wrapper"><table class="blk" name="blk_text" width="600" cellspacing="0" cellpadding="0" border="0"><tbody><tr><td><table class="bmeContainerRow" width="100%" cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="tdPart" valign="top" align="center"><table name="tblText" style="float:left; background-color:transparent;" width="600" cellspacing="0" cellpadding="0" border="0" align="left"><tbody><tr><td name="tblCell" style="padding: 15px 20px; font-family: Arial, Helvetica, sans-serif; font-size: 14px; font-weight: normal; color: rgb(56, 56, 56); text-align: left;" valign="top" align="left"><div style="line-height: 150%; text-align: center;"><span style="font-size: 12px; font-family: 'Courier New', Courier; color: #ffffff; line-height: 150%;"><span style="text-decoration: underline; line-height: 150%;">www.yourdomain.com</span></span></div></td></tr></tbody></table></td></tr></tbody></table></td></tr></tbody></table></div><div id="dv_3" class="blk_wrapper"><table class="blk" name="blk_image" width="600" cellspacing="0" cellpadding="0" border="0"><tbody><tr><td><table width="100%" cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="bmeImage" style="border-collapse: collapse; padding: 10px 20px;" align="center"><img src="https://www.benchmarkemail.com/images/templates_n/new_editor/Templates/Cake/Logo.png" style="max-width: 64px; display: block; width: 64px;" alt="" width="64" border="0"></td></tr></tbody></table></td></tr></tbody></table></div><div id="dv_9" class="blk_wrapper"><table class="blk" name="blk_image" width="600" cellspacing="0" cellpadding="0" border="0"><tbody><tr><td><table width="100%" cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="bmeImage" style="border-collapse: collapse; padding: 20px;" align="center"><img src="https://www.benchmarkemail.com/images/templates_n/new_editor/Templates/Cake/Cake.png" style="max-width: 374px; display: block; width: 374px;" alt="" width="374" border="0"></td></tr></tbody></table></td></tr></tbody></table></div><div id="dv_15" class="blk_wrapper"><table class="blk" name="blk_text" width="600" cellspacing="0" cellpadding="0" border="0"><tbody><tr><td><table class="bmeContainerRow" width="100%" cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="tdPart" valign="top" align="center"><table name="tblText" style="float:left; background-color:transparent;" width="600" cellspacing="0" cellpadding="0" border="0" align="left"><tbody><tr><td name="tblCell" style="padding: 20px; font-family: Arial, Helvetica, sans-serif; font-size: 14px; font-weight: normal; color: rgb(56, 56, 56); text-align: left;" valign="top" align="left"><div style="line-height: 125%; text-align: center;"><span style="font-size: 60px; font-family: 'Courier New', Courier; color: #ffffff; line-height: 125%;"><strong>{req.body.name}</strong></span></div></td></tr></tbody></table></td></tr></tbody></table></td></tr></tbody></table></div>
        // // </td></tr> <tr><td class="blk_container bmeHolder" name="bmeBody" style="color: rgb(56, 56, 56); border: 0px none transparent; background-color: rgb(52, 73, 94);" width="100%" valign="top" bgcolor="#34495e" align="center"><div id="dv_11" class="blk_wrapper"><table class="blk" name="blk_text" width="600" cellspacing="0" cellpadding="0" border="0"><tbody><tr><td><table class="bmeContainerRow" width="100%" cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="tdPart" valign="top" align="center"><table name="tblText" style="float:left; background-color:transparent;" width="600" cellspacing="0" cellpadding="0" border="0" align="left"><tbody><tr><td name="tblCell" style="padding: 20px; font-family: Arial, Helvetica, sans-serif; font-size: 14px; font-weight: normal; color: rgb(56, 56, 56); text-align: left;" valign="top" align="left"><div style="line-height: 200%;"><span style="font-size: 14px; font-family: 'Courier New', Courier; color: #ffffff; line-height: 200%;">We heard it's your birthday, and we'd like to celebrate you! Please enjoy this special little something from us and treat yourself. At checkout, enter the code MYBDAY15 to receive 15% off your next purchase. Hurry though! It'll only work during your birthday month. On behalf of our team, happy birthday!</span></div></td></tr></tbody></table></td></tr></tbody></table></td></tr></tbody></table></div><div id="dv_13" class="blk_wrapper"><table class="blk" name="blk_divider" style="" width="600" cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="tblCellMain" style="padding: 10px 0px;"><table class="tblLine" style="border-top-width: 0px; border-top-style: none; min-width: 1px;" width="100%" cellspacing="0" cellpadding="0" border="0"><tbody><tr><td><span></span></td></tr></tbody></table></td></tr></tbody></table></div><div id="dv_12" class="blk_wrapper"><table class="blk" name="blk_button" style="" width="600" cellspacing="0" cellpadding="0" border="0"><tbody><tr><td width="20"></td><td align="center"><table class="tblContainer" width="100%" cellspacing="0" cellpadding="0" border="0"><tbody><tr><td height="20"></td></tr><tr><td align="center"><table class="bmeButton" style="border-collapse: separate;" cellspacing="0" cellpadding="0" border="0" align="center"><tbody><tr><td style="border-radius: 5px; border: 3px solid rgb(255, 255, 255); text-align: center; font-family: Arial, Helvetica, sans-serif; font-size: 14px; padding: 20px 40px; font-weight: bold; border-collapse: separate;" class="bmeButtonText"><span style="font-family: 'Courier New', Courier; font-size: 20px; color: rgb(255, 255, 255);"><a style="color:#FFFFFF;text-decoration:none;" target="_blank">Use My Treat</a></span></td></tr></tbody></table></td></tr><tr><td height="20"></td></tr></tbody></table></td><td width="20"></td></tr></tbody></table></div><div id="dv_14" class="blk_wrapper"><table class="blk" name="blk_divider" style="" width="600" cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="tblCellMain" style="padding: 20px 0px;"><table class="tblLine" style="border-top-width: 0px; border-top-style: none; min-width: 1px;" width="100%" cellspacing="0" cellpadding="0" border="0"><tbody><tr><td><span></span></td></tr></tbody></table></td></tr></tbody></table></div>
        // // </td></tr> <tr><td class="blk_container bmeHolder" name="bmePreFooter" style="color: rgb(56, 56, 56); border: 0px none transparent; background-color: rgb(52, 73, 94);" width="100%" valign="top" bgcolor="#34495e" align="center">
        // // <div id="dv_8" class="blk_wrapper"><table style="" name="blk_social_follow" class="blk" width="600" cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="tblCellMain" style="padding-top:20px; padding-bottom:20px; padding-left:20px; padding-right:20px;" align="center"><table class="tblContainer mblSocialContain" style="text-align:center;" cellspacing="0" cellpadding="0" border="0" align="center"><tbody><tr><td class="tdItemContainer"><table class="mblSocialContain" style="table-layout: auto;" cellspacing="0" cellpadding="0" border="0"><tbody><tr><td name="bmeSocialTD" valign="top"><!--[if gte mso 6]></td><td align="left" valign="top"><![endif]--><table class="bmeFollowItem" type="twitter" style="float: left; display: block;" cellspacing="0" cellpadding="0" border="0" align="left"><tbody><tr><td class="bmeFollowItemIcon" gutter="20" style="padding-right:20px;height:55px;" width="24" align="left"><a href="http://twitter.com" style="display: inline-block;background-color: rgb(245, 100, 98);border-radius: 28px;border-style: none; border-width: 0px; border-color: rgba(0, 0, 0, 0);" target="_blank"><img src="https://ui.benchmarkemail.com/images/editor/socialicons/tw_btn.png" alt="Twitter" style="display: block; max-width: 114px;" width="57" height="57" border="0"></a></td></tr></tbody></table><!--[if gte mso 6]></td><td align="left" valign="top"><![endif]--><table class="bmeFollowItem" type="facebook" style="float: left; display: block;" cellspacing="0" cellpadding="0" border="0" align="left"><tbody><tr><td class="bmeFollowItemIcon" gutter="20" style="padding-right:20px;height:55px;" width="24" align="left"><a href="http://www.facebook.com" style="display: inline-block;background-color: rgb(245, 100, 98);border-radius: 28px;border-style: none; border-width: 0px; border-color: rgba(0, 0, 0, 0);" target="_blank"><img src="https://ui.benchmarkemail.com/images/editor/socialicons/fb_btn.png" alt="Facebook" style="display: block; max-width: 114px;" width="57" height="57" border="0"></a></td></tr></tbody></table><!--[if gte mso 6]></td><td align="left" valign="top"><![endif]--><table class="bmeFollowItem" type="instagram" style="float: left; display: block;" cellspacing="0" cellpadding="0" border="0" align="left"><tbody><tr><td class="bmeFollowItemIcon" gutter="20" style="height:55px;" width="24" align="left"><a href="http://instagram.com" style="display: inline-block;background-color: rgb(245, 100, 98);border-radius: 28px;border-style: none; border-width: 0px; border-color: rgb(0, 0, 238);" target="_blank"><img src="https://ui.benchmarkemail.com/images/editor/socialicons/in_btn.png" alt="Instagram" style="display: block; max-width: 114px;" width="57" height="57" border="0"></a></td></tr></tbody></table></td></tr></tbody></table></td></tr></tbody></table></td></tr></tbody></table></div><div id="dv_4" class="blk_wrapper"><table class="blk" name="blk_divider" style="" width="600" cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="tblCellMain" style="padding: 20px 0px;"><table class="tblLine" style="border-top-width: 0px; border-top-style: none; min-width: 1px;" width="100%" cellspacing="0" cellpadding="0" border="0"><tbody><tr><td><span></span></td></tr></tbody></table></td></tr></tbody></table></div><div id="dv_6" class="blk_wrapper"><table class="blk" name="blk_boxtext" width="600" cellspacing="0" cellpadding="0" border="0"><tbody><tr><td name="bmeBoxContainer" style="padding-left:0px; padding-right:0px; padding-top:10px; padding-bottom:10px;" align="center"><table name="tblText" width="100%" cellspacing="0" cellpadding="0" border="0"><tbody><tr><td style="padding: 20px; font-family:Arial, Helvetica, sans-serif; font-weight: normal; font-size: 14px; color: #383838;background-color:rgb(249, 230, 103); border-collapse: collapse;" name="tblCell" valign="top" align="left"><div style="line-height: 125%; text-align: center;"><span style="font-size: 24px; font-family: 'Courier New', Courier; color: #34495e; line-height: 125%;">“Time sprouted wings.”</span><br><span style="font-size: 14px; font-family: 'Courier New', Courier; color: #34495e; line-height: 125%;"><br>- Sally J., VP of Fun<br></span></div></td></tr></tbody></table></td></tr></tbody></table></div><div id="dv_5" class="blk_wrapper"><table class="blk" name="blk_divider" style="" width="600" cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="tblCellMain" style="padding: 20px 0px;"><table class="tblLine" style="border-top-width: 0px; border-top-style: none; min-width: 1px;" width="100%" cellspacing="0" cellpadding="0" border="0"><tbody><tr><td><span></span></td></tr></tbody></table></td></tr></tbody></table></div>
        // // </td></tr> </tbody></table> </td></tr>  <tr><td class="blk_container bmeHolder" name="bmeFooter" style="color: rgb(102, 102, 102); border: 0px none transparent; background-color: rgb(52, 73, 94);" width="100%" valign="top" bgcolor="#34495e" align="center"><div id="dv_10" class="blk_wrapper"><table class="blk" name="blk_footer" style="" width="600" cellspacing="0" cellpadding="0" border="0"><tbody><tr><td name="tblCell" style="padding:20px;" valign="top" align="left"><table width="100%" cellspacing="0" cellpadding="0" border="0"><tbody><tr><td name="bmeBadgeText" style="text-align:left; word-break: break-all;" align="left"><span id="spnFooterText" style="font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-size: 11px; line-height: 140%;"><var type="BME_CANSPAM">This message was sent to test@benchmarkemail.com by <span style="text-decoration:underline;">Benchmark Templates</span></var><br><var type="BME_ADDRESS">10621 Calle Lee, Building 141, Los Alamitos, CA, 90720</var></span><br><br><span style="font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-size: 11px; line-height: 140%;"><var type="BME_LINKS"><span style="text-decoration:underline" href="#"><img src="https://www.benchmarkemail.com/images/verified.png" alt="Unsubscribe from all mailings" title="Unsubscribe from all mailings" border="0"></span><span style="text-decoration:underline;">Unsubscribe</span> | <span style="text-decoration:underline;">Manage Subscription</span> |  <span style="text-decoration:underline;">Forward Email</span>  |  <span style="text-decoration:underline;">Report Abuse</span></var><br></span></td></tr><tr><td name="bmeBadgeImage" style="text-align: left; padding-top: 20px; word-break: break-all;" align="left"><var type="BME_BADGE"><img src="https://www.benchmarkemail.com/images/web4/misc/emailfooter/opt9.png" name="bmeBadgeImage" border="0"></var></td></tr></tbody></table></td></tr></tbody></table></div></td></tr> </tbody></table></td></tr></tbody></table></td></tr></tbody></table>    
        // // </body>`, // html body
    });

};


exports.getallNewsletter = (callback) => {
    con.query(`SELECT * FROM newsletter`, (error, result) => {
        if (error) {
            return callback('error: ' + error)
        }
        return callback(null, result);

    })
}